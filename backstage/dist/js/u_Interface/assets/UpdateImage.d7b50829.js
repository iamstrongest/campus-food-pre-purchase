import"./base.c10643b5.js";import{g as _}from"./el-message.8813f6db.js";import{_ as m,I as g,r as o,o as v,a as I,m as e,x as h,K as u,J as y,M as U,N as w}from"./index.6a0ffa21.js";import{e as x,g as k}from"./index.95142097.js";const N=a=>(U("data-v-04f57ddc"),a=a(),w(),a),S={class:"image-container"},B=N(()=>e("h1",null,"\u66F4\u6539\u4E2A\u4EBA\u5934\u50CF",-1)),C={class:"image"},V=u("\u70B9\u51FB\u6B64\u5904\u4E0A\u4F20\u5934\u50CF "),$=u(),E={__name:"UpdateImage",setup(a){const n=g(),c=o(),r=o(),l=o(!1),i=o(""),p=()=>{let s=new FileReader,t=c.value.files[0];s.readAsDataURL(t),s.onload=function(d){i.value=this.result,r.value.src=this.result,l.value=!0,console.log(this.result)}};async function f(){if(l.value){await x(`users/${n.loginId}/update/image`,i.value);const{data:s}=await k(`users/${n.loginId}`);n.userInfo=s,l.value=!1,_({message:"\u4E0A\u4F20\u6210\u529F",type:"success"})}else{_({message:"\u8BF7\u5148\u4E0A\u4F20\u7167\u7247",type:"warning"});return}}return(s,t)=>{const d=y("font-awesome-icon");return v(),I("div",S,[B,e("div",C,[e("img",{ref_key:"img",ref:r,src:"",title:"\u5934\u50CF\u5C55\u793A\u533A"},null,512)]),e("span",null,[e("i",null,[V,h(d,{icon:"fa-solid fa-upload"})]),$,e("input",{ref_key:"file",ref:c,type:"file",onChange:t[0]||(t[0]=M=>p())},null,544)]),e("button",{onClick:f},"\u786E\u8BA4\u4E0A\u4F20")])}}},F=m(E,[["__scopeId","data-v-04f57ddc"]]);export{F as default};
